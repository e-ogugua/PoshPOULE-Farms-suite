name: Mark stale issues and pull requests

on:
  schedule:
    - cron: '0 0 * * *'  # Runs at midnight UTC every day
  workflow_dispatch:

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v10
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          days-before-stale: 30
          days-before-close: 7
          stale-issue-message: 'This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions!'
          stale-pr-message: 'This pull request has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions!'
          close-issue-message: 'This issue has been automatically closed due to inactivity. If this is still relevant, please feel free to reopen it.'
          close-pr-message: 'This pull request has been automatically closed due to inactivity. If you would like to continue working on this, please reopen it.'
          days-before-pr-stale: 60  # Give PRs more time before marking as stale
          days-before-pr-close: 14  # Give PRs more time before closing
          exempt-issue-labels: 'pinned,security,bug,good first issue,help wanted,priority:high,priority:critical,status:blocked,status:in-progress,status:pending-merge'
          exempt-pr-labels: 'pinned,security,bug,priority:high,priority:critical,status:blocked,status:in-progress,status:pending-merge'
          only-labels: ''  # Process all issues and PRs regardless of labels
          operations-per-run: 100
          remove-stale-when-updated: true
          debug-only: false  # Set to true for testing without making changes
